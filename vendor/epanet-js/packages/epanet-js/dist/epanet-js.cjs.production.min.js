"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@model-create/epanet-engine"),e=function(){function e(){this._instance=t.epanetEngine,this._FS=this._instance.FS}return Object.defineProperty(e.prototype,"version",{get:function(){var t=this._instance._malloc(4);this._instance.getversion(t);var e=this._instance.getValue(t,"i32");return this._instance._free(t),e},enumerable:!0,configurable:!0}),e.prototype.getError=function(t){var e=this._instance._malloc(256);this._instance.geterror(t,e);var r=this._instance.UTF8ToString(e);return this._instance._free(e),r},e.prototype.writeFile=function(t,e){this._FS.writeFile(t,e)},e.prototype.readFile=function(t,e){return this._FS.readFile(t,e&&"utf8"!==e?{encoding:e}:{encoding:e="utf8"})},e}(),r=function(){return(r=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function o(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,n++)o[n]=i[s];return o}var n,i=function(){function t(){}return t.prototype.close=function(){this._checkError(this._EN.close())},t.prototype.getCount=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getcount.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getTitle=function(){var t,e=this._allocateMemory("char-title","char-title","char-title");return this._checkError((t=this._EN).gettitle.apply(t,e)),{line1:this._getValue(e[0],"char"),line2:this._getValue(e[1],"char"),line3:this._getValue(e[2],"char")}},t.prototype.init=function(t,e,r,o){this._checkError(this._EN.init(t,e,r,o))},t.prototype.open=function(t,e,r){this._checkError(this._EN.open(t,e,r))},t.prototype.runProject=function(t,e,r){this._checkError(this._EN.runproject(t,e,r))},t.prototype.saveInpFile=function(t){this._checkError(this._EN.saveinpfile(t))},t.prototype.setTitle=function(t,e,r){this._checkError(this._EN.settitle(t,e,r))},t}(),s=function(){function t(){}return t.prototype.addNode=function(t,e){var r,n=this._allocateMemory("int");return this._checkError((r=this._EN).addnode.apply(r,o([t,e],n))),this._getValue(n[0],"int")},t.prototype.deleteNode=function(t,e){this._checkError(this._EN.deletenode(t,e))},t.prototype.getNodeIndex=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getnodeindex.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getNodeId=function(t){var e,r=this._allocateMemory("char");return this._checkError((e=this._EN).getnodeid.apply(e,o([t],r))),this._getValue(r[0],"char")},t.prototype.setNodeId=function(t,e){this._checkError(this._EN.setnodeid(t,e))},t.prototype.getNodeType=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getnodetype.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getNodeValue=function(t,e){var r,n=this._allocateMemory("double");return this._checkError((r=this._EN).getnodevalue.apply(r,o([t,e],n))),this._getValue(n[0],"double")},t.prototype.setNodeValue=function(t,e,r){this._checkError(this._EN.setnodevalue(t,e,r))},t.prototype.setJunctionData=function(t,e,r,o){this._checkError(this._EN.setjuncdata(t,e,r,o))},t.prototype.setTankData=function(t,e,r,o,n,i,s,a){this._checkError(this._EN.settankdata(t,e,r,o,n,i,s,a))},t.prototype.getCoordinates=function(t){var e,r=this._allocateMemory("double","double");return this._checkError((e=this._EN).getcoord.apply(e,o([t],r))),{x:this._getValue(r[0],"double"),y:this._getValue(r[1],"double")}},t.prototype.setCoordinates=function(t,e,r){this._checkError(this._EN.setcoord(t,e,r))},t}(),a=function(){function t(){}return t.prototype.solveH=function(){this._checkError(this._EN.solveH())},t.prototype.useHydFile=function(t){this._checkError(this._EN.usehydfile(t))},t.prototype.openH=function(){this._checkError(this._EN.openH())},t.prototype.initH=function(t){this._checkError(this._EN.initH(t))},t.prototype.runH=function(){var t,e=this._allocateMemory("long");return this._checkError((t=this._EN).runH.apply(t,e)),this._getValue(e[0],"long")},t.prototype.nextH=function(){var t,e=this._allocateMemory("long");return this._checkError((t=this._EN).nextH.apply(t,e)),this._getValue(e[0],"long")},t.prototype.saveH=function(){this._checkError(this._EN.saveH())},t.prototype.saveHydFile=function(t){this._checkError(this._EN.savehydfile(t))},t.prototype.closeH=function(){this._checkError(this._EN.closeH())},t}(),p=function(){function t(){}return t.prototype.solveQ=function(){this._checkError(this._EN.solveQ())},t.prototype.openQ=function(){this._checkError(this._EN.openQ())},t.prototype.initQ=function(t){this._checkError(this._EN.initQ(t))},t.prototype.runQ=function(){var t,e=this._allocateMemory("long");return this._checkError((t=this._EN).runQ.apply(t,e)),this._getValue(e[0],"long")},t.prototype.nextQ=function(){var t,e=this._allocateMemory("long");return this._checkError((t=this._EN).nextQ.apply(t,e)),this._getValue(e[0],"long")},t.prototype.stepQ=function(){var t,e=this._allocateMemory("long");return this._checkError((t=this._EN).stepQ.apply(t,e)),this._getValue(e[0],"long")},t.prototype.closeQ=function(){this._checkError(this._EN.closeQ())},t}(),u=function(){function t(){}return t.prototype.writeLine=function(t){this._checkError(this._EN.writeline(t))},t.prototype.report=function(){this._checkError(this._EN.report())},t.prototype.copyReport=function(t){this._checkError(this._EN.copyreport(t))},t.prototype.clearReport=function(){this._checkError(this._EN.clearreport())},t.prototype.resetReport=function(){this._checkError(this._EN.resetreport())},t.prototype.setReport=function(t){this._checkError(this._EN.setreport(t))},t.prototype.setStatusReport=function(t){this._checkError(this._EN.setstatusreport(t))},t.prototype.getStatistic=function(t){var e,r=this._allocateMemory("double");return this._checkError((e=this._EN).getstatistic.apply(e,o([t],r))),this._getValue(r[0],"double")},t.prototype.getResultIndex=function(t,e){var r,n=this._allocateMemory("int");return this._checkError((r=this._EN).getresultindex.apply(r,o([t,e],n))),this._getValue(n[0],"int")},t}(),l=function(){function t(){}return t.prototype.getFlowUnits=function(){var t,e=this._allocateMemory("int");return this._checkError((t=this._EN).getflowunits.apply(t,e)),this._getValue(e[0],"int")},t.prototype.getOption=function(t){var e,r=this._allocateMemory("double");return this._checkError((e=this._EN).getoption.apply(e,o([t],r))),this._getValue(r[0],"double")},t.prototype.getQualityInfo=function(){var t,e=this._allocateMemory("int","char","char","int");return this._checkError((t=this._EN).getqualinfo.apply(t,e)),{qualType:this._getValue(e[0],"int"),chemName:this._getValue(e[1],"char"),chemUnits:this._getValue(e[2],"char"),traceNode:this._getValue(e[3],"int")}},t.prototype.getQualityType=function(){var t,e=this._allocateMemory("int","int");return this._checkError((t=this._EN).getqualtype.apply(t,e)),{qualType:this._getValue(e[0],"int"),traceNode:this._getValue(e[1],"int")}},t.prototype.getTimeParameter=function(t){var e,r=this._allocateMemory("long");return this._checkError((e=this._EN).gettimeparam.apply(e,o([t],r))),this._getValue(r[0],"long")},t.prototype.setFlowUnits=function(t){this._checkError(this._EN.setflowunits(t))},t.prototype.setOption=function(t,e){this._checkError(this._EN.setoption(t,e))},t.prototype.setQualityType=function(t,e,r,o){this._checkError(this._EN.setqualtype(t,e,r,o))},t.prototype.setTimeParameter=function(t,e){this._checkError(this._EN.settimeparam(t,e))},t}(),h=function(){function t(){}return t.prototype.addDemand=function(t,e,r,o){this._checkError(this._EN.adddemand(t,e,r,o))},t.prototype.deleteDemand=function(t,e){this._checkError(this._EN.deletedemand(t,e))},t.prototype.getBaseDemand=function(t,e){var r,n=this._allocateMemory("double");return this._checkError((r=this._EN).getbasedemand.apply(r,o([t,e],n))),this._getValue(n[0],"double")},t.prototype.getDemandIndex=function(t,e){var r,n=this._allocateMemory("int");return this._checkError((r=this._EN).getdemandindex.apply(r,o([t,e],n))),this._getValue(n[0],"int")},t.prototype.getDemandModel=function(){var t,e=this._allocateMemory("int","double","double","double");return this._checkError((t=this._EN).getdemandmodel.apply(t,e)),{type:this._getValue(e[0],"int"),pmin:this._getValue(e[1],"double"),preq:this._getValue(e[2],"double"),pexp:this._getValue(e[3],"double")}},t.prototype.getDemandName=function(t,e){var r,n=this._allocateMemory("char");return this._checkError((r=this._EN).getdemandname.apply(r,o([t,e],n))),this._getValue(n[0],"char")},t.prototype.getDemandPattern=function(t,e){var r,n=this._allocateMemory("int");return this._checkError((r=this._EN).getdemandpattern.apply(r,o([t,e],n))),this._getValue(n[0],"int")},t.prototype.getNumberOfDemands=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getnumdemands.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.setBaseDemand=function(t,e,r){this._checkError(this._EN.setbasedemand(t,e,r))},t.prototype.setDemandModel=function(t,e,r,o){this._checkError(this._EN.setdemandmodel(t,e,r,o))},t.prototype.setDemandName=function(t,e,r){this._checkError(this._EN.setdemandname(t,e,r))},t.prototype.setDemandPattern=function(t,e,r){this._checkError(this._EN.setdemandpattern(t,e,r))},t}(),c=function(){function t(){}return t.prototype.addLink=function(t,e,r,n){var i,s=this._allocateMemory("int");return this._checkError((i=this._EN).addlink.apply(i,o([t,e,r,n],s))),this._getValue(s[0],"int")},t.prototype.deleteLink=function(t,e){this._checkError(this._EN.deletelink(t,e))},t.prototype.getLinkIndex=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getlinkindex.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getLinkId=function(t){var e,r=this._allocateMemory("char");return this._checkError((e=this._EN).getlinkid.apply(e,o([t],r))),this._getValue(r[0],"char")},t.prototype.setLinkId=function(t,e){this._checkError(this._EN.setlinkid(t,e))},t.prototype.getLinkType=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getlinktype.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.setLinkType=function(t,e,r){var o=this._allocateMemory("int");return this._instance.setValue(o[0],t,"i32"),this._checkError(this._EN.setlinktype(o[0],e,r)),this._getValue(o[0],"int")},t.prototype.getLinkNodes=function(t){var e,r=this._allocateMemory("int","int");return this._checkError((e=this._EN).getlinknodes.apply(e,o([t],r))),{node1:this._getValue(r[0],"int"),node2:this._getValue(r[1],"int")}},t.prototype.setLinkNodes=function(t,e,r){this._checkError(this._EN.setlinknodes(t,e,r))},t.prototype.getLinkValue=function(t,e){var r,n=this._allocateMemory("double");return this._checkError((r=this._EN).getlinkvalue.apply(r,o([t,e],n))),this._getValue(n[0],"double")},t.prototype.setLinkValue=function(t,e,r){this._checkError(this._EN.setlinkvalue(t,e,r))},t.prototype.setPipeData=function(t,e,r,o,n){this._checkError(this._EN.setpipedata(t,e,r,o,n))},t.prototype.getPumpType=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getpumptype.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getHeadCurveIndex=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getheadcurveindex.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.setHeadCurveIndex=function(t,e){this._checkError(this._EN.setheadcurveindex(t,e))},t.prototype.getVertexCount=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getvertexcount.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getVertex=function(t,e){var r,n=this._allocateMemory("double","double");return this._checkError((r=this._EN).getvertex.apply(r,o([t,e],n))),{x:this._getValue(n[0],"double"),y:this._getValue(n[1],"double")}},t.prototype.setVertices=function(t,e,r){if(e.length!==r.length)throw new Error("X and Y vertex arrays must have the same length - X length: "+e.length+", Y length "+r.length);var o=this._allocateMemoryForArray(e),n=this._allocateMemoryForArray(r);this._checkError(this._EN.setvertices(t,o,n,e.length)),this._instance._free(o),this._instance._free(n)},t}(),y=function(){function t(){}return t.prototype.addPattern=function(t){this._checkError(this._EN.addpattern(t))},t.prototype.deletePattern=function(t){this._checkError(this._EN.deletepattern(t))},t.prototype.getPatternIndex=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getpatternindex.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getPatternId=function(t){var e,r=this._allocateMemory("char");return this._checkError((e=this._EN).getpatternid.apply(e,o([t],r))),this._getValue(r[0],"char")},t.prototype.setPatternId=function(t,e){this._checkError(this._EN.setpatternid(t,e))},t.prototype.getPatternLength=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getpatternlen.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getPatternValue=function(t,e){var r,n=this._allocateMemory("double");return this._checkError((r=this._EN).getpatternvalue.apply(r,o([t,e],n))),this._getValue(n[0],"double")},t.prototype.setPatternValue=function(t,e,r){this._checkError(this._EN.setpatternvalue(t,e,r))},t.prototype.getAveragePatternValue=function(t){var e,r=this._allocateMemory("double");return this._checkError((e=this._EN).getaveragepatternvalue.apply(e,o([t],r))),this._getValue(r[0],"double")},t.prototype.setPattern=function(t,e){var r=this._allocateMemoryForArray(e);this._checkError(this._EN.setpattern(t,r,e.length)),this._instance._free(r)},t}(),d=function(){function t(){}return t.prototype.addCurve=function(t){this._checkError(this._EN.addcurve(t))},t.prototype.deleteCurve=function(t){this._checkError(this._EN.deletecurve(t))},t.prototype.getCurveIndex=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getcurveindex.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getCurveId=function(t){var e,r=this._allocateMemory("char");return this._checkError((e=this._EN).getcurveid.apply(e,o([t],r))),this._getValue(r[0],"char")},t.prototype.setCurveId=function(t,e){this._checkError(this._EN.setcurveid(t,e))},t.prototype.getCurveLenth=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getcurvelen.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getCurveType=function(t){var e,r=this._allocateMemory("int");return this._checkError((e=this._EN).getcurvetype.apply(e,o([t],r))),this._getValue(r[0],"int")},t.prototype.getCurveValue=function(t,e){var r,n=this._allocateMemory("double","double");return this._checkError((r=this._EN).getcurvevalue.apply(r,o([t,e],n))),{x:this._getValue(n[0],"double"),y:this._getValue(n[1],"double")}},t.prototype.setCurveValue=function(t,e,r,o){this._checkError(this._EN.setcurvevalue(t,e,r,o))},t.prototype.setCurve=function(t,e,r){if(e.length!==r.length)throw new Error("X and Y vertex arrays must have the same length - X length: "+e.length+", Y length "+r.length);var o=this._allocateMemoryForArray(e),n=this._allocateMemoryForArray(r);this._checkError(this._EN.setcurve(t,o,n,e.length)),this._instance._free(o),this._instance._free(n)},t}(),_=function(){function t(){}return t.prototype.addControl=function(t,e,r,n,i){var s,a=this._allocateMemory("int");return this._checkError((s=this._EN).addcontrol.apply(s,o([t,e,r,n,i],a))),this._getValue(a[0],"int")},t.prototype.deleteControl=function(t){this._checkError(this._EN.deletecontrol(t))},t.prototype.getControl=function(t){var e,r=this._allocateMemory("int","int","double","int","double");return this._checkError((e=this._EN).getcontrol.apply(e,o([t],r))),{type:this._getValue(r[0],"int"),linkIndex:this._getValue(r[1],"int"),setting:this._getValue(r[2],"double"),nodeIndex:this._getValue(r[3],"int"),level:this._getValue(r[4],"double")}},t.prototype.setControl=function(t,e,r,o,n,i){this._checkError(this._EN.setcontrol(t,e,r,o,n,i))},t}(),g=function(){function t(){}return t.prototype.addRule=function(t){this._checkError(this._EN.addrule(t))},t.prototype.deleteRule=function(t){this._checkError(this._EN.deleterule(t))},t.prototype.getRule=function(t){var e,r=this._allocateMemory("int","int","int","double");return this._checkError((e=this._EN).getrule.apply(e,o([t],r))),{premiseCount:this._getValue(r[0],"int"),thenActionCount:this._getValue(r[1],"int"),elseActionCount:this._getValue(r[2],"int"),priority:this._getValue(r[3],"double")}},t.prototype.getRuleId=function(t){var e,r=this._allocateMemory("char");return this._checkError((e=this._EN).getruleID.apply(e,o([t],r))),this._getValue(r[0],"char")},t.prototype.getPremise=function(t,e){var r,n=this._allocateMemory("int","int","int","int","int","int","double");return this._checkError((r=this._EN).getpremise.apply(r,o([t,e],n))),{logop:this._getValue(n[0],"int"),object:this._getValue(n[1],"int"),objIndex:this._getValue(n[2],"int"),variable:this._getValue(n[3],"int"),relop:this._getValue(n[4],"int"),status:this._getValue(n[5],"int"),value:this._getValue(n[6],"double")}},t.prototype.setPremise=function(t,e,r,o,n,i,s,a,p){this._checkError(this._EN.setpremise(t,e,r,o,n,i,s,a,p))},t.prototype.setPremiseIndex=function(t,e,r){this._checkError(this._EN.setpremiseindex(t,e,r))},t.prototype.setPremiseStatus=function(t,e,r){this._checkError(this._EN.setpremisestatus(t,e,r))},t.prototype.setPremiseValue=function(t,e,r){this._checkError(this._EN.setpremisevalue(t,e,r))},t.prototype.getThenAction=function(t,e){var r,n=this._allocateMemory("int","int","double");return this._checkError((r=this._EN).getthenaction.apply(r,o([t,e],n))),{linkIndex:this._getValue(n[0],"int"),status:this._getValue(n[1],"int"),setting:this._getValue(n[2],"double")}},t.prototype.setThenAction=function(t,e,r,o,n){this._checkError(this._EN.setthenaction(t,e,r,o,n))},t.prototype.getElseAction=function(t,e){var r,n=this._allocateMemory("int","int","double");return this._checkError((r=this._EN).getelseaction.apply(r,o([t,e],n))),{linkIndex:this._getValue(n[0],"int"),status:this._getValue(n[1],"int"),setting:this._getValue(n[2],"double")}},t.prototype.setElseAction=function(t,e,r,o,n){this._checkError(this._EN.setelseaction(t,e,r,o,n))},t.prototype.setRulePriority=function(t,e){this._checkError(this._EN.setrulepriority(t,e))},t}(),E=function(){function t(t){this.open=i.prototype.open,this.close=i.prototype.close,this.runProject=i.prototype.runProject,this.init=i.prototype.init,this.getCount=i.prototype.getCount,this.getTitle=i.prototype.getTitle,this.setTitle=i.prototype.setTitle,this.saveInpFile=i.prototype.saveInpFile,this.solveH=a.prototype.solveH,this.useHydFile=a.prototype.useHydFile,this.openH=a.prototype.openH,this.initH=a.prototype.initH,this.runH=a.prototype.runH,this.nextH=a.prototype.nextH,this.saveH=a.prototype.saveH,this.saveHydFile=a.prototype.saveHydFile,this.closeH=a.prototype.closeH,this.solveQ=p.prototype.solveQ,this.openQ=p.prototype.openQ,this.initQ=p.prototype.initQ,this.runQ=p.prototype.runQ,this.nextQ=p.prototype.nextQ,this.stepQ=p.prototype.stepQ,this.closeQ=p.prototype.closeQ,this.writeLine=u.prototype.writeLine,this.report=u.prototype.report,this.copyReport=u.prototype.copyReport,this.clearReport=u.prototype.clearReport,this.resetReport=u.prototype.resetReport,this.setReport=u.prototype.setReport,this.setStatusReport=u.prototype.setStatusReport,this.getStatistic=u.prototype.getStatistic,this.getResultIndex=u.prototype.getResultIndex,this.getFlowUnits=l.prototype.getFlowUnits,this.getOption=l.prototype.getOption,this.getQualityInfo=l.prototype.getQualityInfo,this.getQualityType=l.prototype.getQualityType,this.getTimeParameter=l.prototype.getTimeParameter,this.setFlowUnits=l.prototype.setFlowUnits,this.setOption=l.prototype.setOption,this.setQualityType=l.prototype.setQualityType,this.setTimeParameter=l.prototype.setTimeParameter,this.addNode=s.prototype.addNode,this.deleteNode=s.prototype.deleteNode,this.getNodeIndex=s.prototype.getNodeIndex,this.getNodeId=s.prototype.getNodeId,this.setNodeId=s.prototype.setNodeId,this.getNodeType=s.prototype.getNodeType,this.getNodeValue=s.prototype.getNodeValue,this.setNodeValue=s.prototype.setNodeValue,this.setJunctionData=s.prototype.setJunctionData,this.setTankData=s.prototype.setTankData,this.getCoordinates=s.prototype.getCoordinates,this.setCoordinates=s.prototype.setCoordinates,this.addDemand=h.prototype.addDemand,this.deleteDemand=h.prototype.deleteDemand,this.getBaseDemand=h.prototype.getBaseDemand,this.getDemandIndex=h.prototype.getDemandIndex,this.getDemandModel=h.prototype.getDemandModel,this.getDemandName=h.prototype.getDemandName,this.getDemandPattern=h.prototype.getDemandPattern,this.getNumberOfDemands=h.prototype.getNumberOfDemands,this.setBaseDemand=h.prototype.setBaseDemand,this.setDemandModel=h.prototype.setDemandModel,this.setDemandName=h.prototype.setDemandName,this.setDemandPattern=h.prototype.setDemandPattern,this.addLink=c.prototype.addLink,this.deleteLink=c.prototype.deleteLink,this.getLinkIndex=c.prototype.getLinkIndex,this.getLinkId=c.prototype.getLinkId,this.setLinkId=c.prototype.setLinkId,this.getLinkType=c.prototype.getLinkType,this.setLinkType=c.prototype.setLinkType,this.getLinkNodes=c.prototype.getLinkNodes,this.setLinkNodes=c.prototype.setLinkNodes,this.getLinkValue=c.prototype.getLinkValue,this.setLinkValue=c.prototype.setLinkValue,this.setPipeData=c.prototype.setPipeData,this.getPumpType=c.prototype.getPumpType,this.getHeadCurveIndex=c.prototype.getHeadCurveIndex,this.setHeadCurveIndex=c.prototype.setHeadCurveIndex,this.getVertexCount=c.prototype.getVertexCount,this.getVertex=c.prototype.getVertex,this.setVertices=c.prototype.setVertices,this.addPattern=y.prototype.addPattern,this.deletePattern=y.prototype.deletePattern,this.getPatternIndex=y.prototype.getPatternIndex,this.getPatternId=y.prototype.getPatternId,this.setPatternId=y.prototype.setPatternId,this.getPatternLength=y.prototype.getPatternLength,this.getPatternValue=y.prototype.getPatternValue,this.setPatternValue=y.prototype.setPatternValue,this.getAveragePatternValue=y.prototype.getAveragePatternValue,this.setPattern=y.prototype.setPattern,this.addCurve=d.prototype.addCurve,this.deleteCurve=d.prototype.deleteCurve,this.getCurveIndex=d.prototype.getCurveIndex,this.getCurveId=d.prototype.getCurveId,this.setCurveId=d.prototype.setCurveId,this.getCurveLenth=d.prototype.getCurveLenth,this.getCurveType=d.prototype.getCurveType,this.getCurveValue=d.prototype.getCurveValue,this.setCurveValue=d.prototype.setCurveValue,this.setCurve=d.prototype.setCurve,this.addControl=_.prototype.addControl,this.deleteControl=_.prototype.deleteControl,this.getControl=_.prototype.getControl,this.setControl=_.prototype.setControl,this.addRule=g.prototype.addRule,this.deleteRule=g.prototype.deleteRule,this.getRule=g.prototype.getRule,this.getRuleId=g.prototype.getRuleId,this.getPremise=g.prototype.getPremise,this.setPremise=g.prototype.setPremise,this.setPremiseIndex=g.prototype.setPremiseIndex,this.setPremiseStatus=g.prototype.setPremiseStatus,this.setPremiseValue=g.prototype.setPremiseValue,this.getThenAction=g.prototype.getThenAction,this.setThenAction=g.prototype.setThenAction,this.getElseAction=g.prototype.getElseAction,this.setElseAction=g.prototype.setElseAction,this.setRulePriority=g.prototype.setRulePriority,this._ws=t,this._instance=t._instance,this._EN=new this._ws._instance.Epanet}return t.prototype._getValue=function(t,e){var r;return r="char"===e?this._instance.UTF8ToString(t):this._instance.getValue(t,"int"===e?"i32":"long"===e?"i64":"double"),this._instance._free(t),r},t.prototype._allocateMemory=function(t){var e=this;if("string"!=typeof t)throw new Error("Method _allocateMemory expected string");var r=Array.prototype.slice.call(arguments);return r.reduce((function(t,r){var o;switch(r){case"char":o=32;break;case"char-title":o=80;break;case"int":o=4;break;default:o=8}var n=e._instance._malloc(o);return t.concat(n)}),[])},t.prototype._allocateMemoryForArray=function(t){var e=new Float64Array(t),r=this._instance._malloc(e.length*e.BYTES_PER_ELEMENT);return this._instance.HEAP8.set(new Uint8Array(e.buffer),r),r},t.prototype._checkError=function(t){if(0!==t){if(!(t<100)){var e=this._ws.getError(t);throw new Error(e)}console.warn("epanet-js: "+this._ws.getError(t))}},t}();!function(t){t[t.Unconditional=0]="Unconditional",t[t.Conditional=1]="Conditional"}(n||(n={}));var m,f=n;!function(t){t[t.Iterations=0]="Iterations",t[t.RelativeError=1]="RelativeError",t[t.MaxHeadError=2]="MaxHeadError",t[t.MaxFlowChange=3]="MaxFlowChange",t[t.MassBalance=4]="MassBalance",t[t.DeficientNodes=5]="DeficientNodes",t[t.DemandReduction=6]="DemandReduction"}(m||(m={}));var v,k=m;!function(t){t[t.LowLevel=0]="LowLevel",t[t.HiLevel=1]="HiLevel",t[t.Timer=2]="Timer",t[t.TimeOfDay=3]="TimeOfDay"}(v||(v={}));var N,C=v;!function(t){t[t.NodeCount=0]="NodeCount",t[t.TankCount=1]="TankCount",t[t.LinkCount=2]="LinkCount",t[t.PatCount=3]="PatCount",t[t.CurveCount=4]="CurveCount",t[t.ControlCount=5]="ControlCount",t[t.RuleCount=6]="RuleCount"}(N||(N={}));var P,V=N;!function(t){t[t.VolumeCurve=0]="VolumeCurve",t[t.PumpCurve=1]="PumpCurve",t[t.EfficCurve=2]="EfficCurve",t[t.HlossCurve=3]="HlossCurve",t[t.GenericCurve=4]="GenericCurve"}(P||(P={}));var M,x=P;!function(t){t[t.DDA=0]="DDA",t[t.PDA=1]="PDA"}(M||(M={}));var T,I=M;!function(t){t[t.CFS=0]="CFS",t[t.GPM=1]="GPM",t[t.MGD=2]="MGD",t[t.IMGD=3]="IMGD",t[t.AFD=4]="AFD",t[t.LPS=5]="LPS",t[t.LPM=6]="LPM",t[t.MLD=7]="MLD",t[t.CMH=8]="CMH",t[t.CMD=9]="CMD"}(T||(T={}));var D,L=T;!function(t){t[t.HW=0]="HW",t[t.DW=1]="DW",t[t.CM=2]="CM"}(D||(D={}));var S,F=D;!function(t){t[t.NoSave=0]="NoSave",t[t.Save=1]="Save",t[t.InitFlow=10]="InitFlow",t[t.SaveAndInit=11]="SaveAndInit"}(S||(S={}));var b,H=S;!function(t){t[t.Diameter=0]="Diameter",t[t.Length=1]="Length",t[t.Roughness=2]="Roughness",t[t.MinorLoss=3]="MinorLoss",t[t.InitStatus=4]="InitStatus",t[t.InitSetting=5]="InitSetting",t[t.KBulk=6]="KBulk",t[t.KWall=7]="KWall",t[t.Flow=8]="Flow",t[t.Velocity=9]="Velocity",t[t.Headloss=10]="Headloss",t[t.Status=11]="Status",t[t.Setting=12]="Setting",t[t.Energy=13]="Energy",t[t.LinkQual=14]="LinkQual",t[t.LinkPattern=15]="LinkPattern",t[t.PumpState=16]="PumpState",t[t.PumpEffic=17]="PumpEffic",t[t.PumpPower=18]="PumpPower",t[t.PumpHCurve=19]="PumpHCurve",t[t.PumpECurve=20]="PumpECurve",t[t.PumpECost=21]="PumpECost",t[t.PumpEPat=22]="PumpEPat"}(b||(b={}));var R,w=b;!function(t){t[t.Closed=0]="Closed",t[t.Open=1]="Open"}(R||(R={}));var A,Q=R;!function(t){t[t.CVPipe=0]="CVPipe",t[t.Pipe=1]="Pipe",t[t.Pump=2]="Pump",t[t.PRV=3]="PRV",t[t.PSV=4]="PSV",t[t.PBV=5]="PBV",t[t.FCV=6]="FCV",t[t.TCV=7]="TCV",t[t.GPV=8]="GPV"}(A||(A={}));var O,G=A;!function(t){t[t.Mix1=0]="Mix1",t[t.Mix2=1]="Mix2",t[t.FIFO=2]="FIFO",t[t.LIFO=3]="LIFO"}(O||(O={}));var B,q=O;!function(t){t[t.Elevation=0]="Elevation",t[t.BaseDemand=1]="BaseDemand",t[t.Pattern=2]="Pattern",t[t.Emitter=3]="Emitter",t[t.Initqual=4]="Initqual",t[t.SourceQual=5]="SourceQual",t[t.SourcePat=6]="SourcePat",t[t.SourceType=7]="SourceType",t[t.TankLevel=8]="TankLevel",t[t.Demand=9]="Demand",t[t.Head=10]="Head",t[t.Pressure=11]="Pressure",t[t.Quality=12]="Quality",t[t.SourceMass=13]="SourceMass",t[t.InitVolume=14]="InitVolume",t[t.MixModel=15]="MixModel",t[t.MixZoneVol=16]="MixZoneVol",t[t.TankDiam=17]="TankDiam",t[t.MinVolume=18]="MinVolume",t[t.VolCurve=19]="VolCurve",t[t.MinLevel=20]="MinLevel",t[t.MaxLevel=21]="MaxLevel",t[t.MixFraction=22]="MixFraction",t[t.TankKBulk=23]="TankKBulk",t[t.TankVolume=24]="TankVolume",t[t.MaxVolume=25]="MaxVolume",t[t.CanOverFlow=26]="CanOverFlow",t[t.DemandDeficit=27]="DemandDeficit"}(B||(B={}));var U,j=B;!function(t){t[t.Junction=0]="Junction",t[t.Reservoir=1]="Reservoir",t[t.Tank=2]="Tank"}(U||(U={}));var W,X=U;!function(t){t[t.Node=0]="Node",t[t.Link=1]="Link",t[t.TimePat=2]="TimePat",t[t.Curve=3]="Curve",t[t.Control=4]="Control",t[t.Rule=5]="Rule"}(W||(W={}));var J,K=W;!function(t){t[t.Trials=0]="Trials",t[t.Accuracy=1]="Accuracy",t[t.Tolerance=2]="Tolerance",t[t.Emitexpon=3]="Emitexpon",t[t.DemandMult=4]="DemandMult",t[t.HeadError=5]="HeadError",t[t.FlowChange=6]="FlowChange",t[t.HeadlossForm=7]="HeadlossForm",t[t.GlobalEffic=8]="GlobalEffic",t[t.GlobalPrice=9]="GlobalPrice",t[t.GlobalPattern=10]="GlobalPattern",t[t.DemandCharge=11]="DemandCharge",t[t.SpGravity=12]="SpGravity",t[t.SpViscos=13]="SpViscos",t[t.Unbalanced=14]="Unbalanced",t[t.CheckFreq=15]="CheckFreq",t[t.MaxCheck=16]="MaxCheck",t[t.DampLimit=17]="DampLimit",t[t.SpDiffus=18]="SpDiffus",t[t.BulkOrder=19]="BulkOrder",t[t.WallOrder=20]="WallOrder",t[t.TankOrder=21]="TankOrder",t[t.ConcenLimit=22]="ConcenLimit"}(J||(J={}));var Y,Z=J;!function(t){t[t.PumpXHead=0]="PumpXHead",t[t.PumpClosed=2]="PumpClosed",t[t.PumpOpen=3]="PumpOpen",t[t.PumpXFlow=5]="PumpXFlow"}(Y||(Y={}));var z,$=Y;!function(t){t[t.ConstHP=0]="ConstHP",t[t.PowerFunc=1]="PowerFunc",t[t.Custom=2]="Custom",t[t.NoCurve=3]="NoCurve"}(z||(z={}));var tt,et=z;!function(t){t[t.None=0]="None",t[t.Chem=1]="Chem",t[t.Age=2]="Age",t[t.Trace=3]="Trace"}(tt||(tt={}));var rt,ot=tt;!function(t){t[t.Node=6]="Node",t[t.Link=7]="Link",t[t.System=8]="System"}(rt||(rt={}));var nt,it=rt;!function(t){t[t.EqualTo=0]="EqualTo",t[t.NotEqualTo=1]="NotEqualTo",t[t.LessOrEqualTo=2]="LessOrEqualTo",t[t.GreaterOrEqualTo=3]="GreaterOrEqualTo",t[t.LessThan=4]="LessThan",t[t.GreaterThan=5]="GreaterThan",t[t.Is=6]="Is",t[t.Not=7]="Not",t[t.Below=8]="Below",t[t.Above=9]="Above"}(nt||(nt={}));var st,at=nt;!function(t){t[t.IsOpen=1]="IsOpen",t[t.IsClosed=2]="IsClosed",t[t.IsActive=3]="IsActive"}(st||(st={}));var pt,ut=st;!function(t){t[t.Demand=0]="Demand",t[t.Head=1]="Head",t[t.Grade=2]="Grade",t[t.Level=3]="Level",t[t.Pressure=4]="Pressure",t[t.Flow=5]="Flow",t[t.Status=6]="Status",t[t.Setting=7]="Setting",t[t.Power=8]="Power",t[t.Time=9]="Time",t[t.ClockTime=10]="ClockTime",t[t.FillTime=11]="FillTime",t[t.DrainTime=12]="DrainTime"}(pt||(pt={}));var lt,ht=pt;!function(t){t[t.MaxId=31]="MaxId",t[t.MaxMsg=255]="MaxMsg"}(lt||(lt={}));var ct,yt=lt;!function(t){t[t.Concen=0]="Concen",t[t.Mass=1]="Mass",t[t.SetPoint=2]="SetPoint",t[t.FlowPaced=3]="FlowPaced"}(ct||(ct={}));var dt,_t=ct;!function(t){t[t.Series=0]="Series",t[t.Average=1]="Average",t[t.Minimum=2]="Minimum",t[t.Maximum=3]="Maximum",t[t.Range=4]="Range"}(dt||(dt={}));var gt,Et=dt;!function(t){t[t.NoReport=0]="NoReport",t[t.NormalReport=1]="NormalReport",t[t.FullReport=2]="FullReport"}(gt||(gt={}));var mt,ft=gt;!function(t){t[t.Duration=0]="Duration",t[t.HydStep=1]="HydStep",t[t.QualStep=2]="QualStep",t[t.PatternStep=3]="PatternStep",t[t.PatternStart=4]="PatternStart",t[t.ReportStep=5]="ReportStep",t[t.ReportStart=6]="ReportStart",t[t.RuleStep=7]="RuleStep",t[t.Statistic=8]="Statistic",t[t.Periods=9]="Periods",t[t.StartTime=10]="StartTime",t[t.HTime=11]="HTime",t[t.QTime=12]="QTime",t[t.HaltFlag=13]="HaltFlag",t[t.NextEvent=14]="NextEvent",t[t.NextEventTank=15]="NextEventTank"}(mt||(mt={}));var vt,kt,Nt=mt;!function(t){t[t.Demand=0]="Demand",t[t.Head=1]="Head",t[t.Pressure=2]="Pressure",t[t.WaterQuality=3]="WaterQuality"}(vt||(vt={})),function(t){t[t.Flow=0]="Flow",t[t.Velocity=1]="Velocity",t[t.Headloss=2]="Headloss",t[t.AvgWaterQuality=3]="AvgWaterQuality",t[t.Status=4]="Status",t[t.Setting=5]="Setting",t[t.ReactionRate=6]="ReactionRate",t[t.Friction=7]="Friction"}(kt||(kt={}));var Ct=function(t,e,r){var o=[];return Vt(e,(function(e){var n=r.buffer.slice(t+32*e,t+32*e+32);o.push(Mt(n))})),o},Pt=function(t,e,r,n,i){var s=r?0:16*t.nodeCount,a=r?t.nodeCount:t.linkCount,p=16*t.nodeCount+32*t.linkCount;return o(Array(t.reportingPeriods)).map((function(t,r){return e+p*r+s+4*n+4*i*a}))},Vt=function(t,e){for(var r=0;r<t;++r)e(r)},Mt=function(t){var e=new Uint8Array(t),r=Array.from(e).filter((function(t){return t>0}));return String.fromCharCode.apply(null,r)};exports.ActionCodeType=f,exports.AnalysisStatistic=k,exports.ControlType=C,exports.CountType=V,exports.CurveType=x,exports.DemandModel=I,exports.FlowUnits=L,exports.HeadLossType=F,exports.InitHydOption=H,exports.LinkProperty=w,exports.LinkStatusType=Q,exports.LinkType=G,exports.MixingModel=q,exports.NodeProperty=j,exports.NodeType=X,exports.ObjectType=K,exports.Option=Z,exports.Project=E,exports.PumpStateType=$,exports.PumpType=et,exports.QualityType=ot,exports.RuleObject=it,exports.RuleOperator=at,exports.RuleStatus=ut,exports.RuleVariable=ht,exports.SizeLimits=yt,exports.SourceType=_t,exports.StatisticType=Et,exports.StatusReport=ft,exports.TimeParameter=Nt,exports.Workspace=e,exports.readBinary=function(t){var e,n,i,s,a,p=new DataView(t.buffer),u={nodeCount:p.getInt32(8,!0),resAndTankCount:p.getInt32(12,!0),linkCount:p.getInt32(16,!0),pumpCount:p.getInt32(20,!0),valveCount:p.getInt32(24,!0),reportingPeriods:p.getInt32(t.byteLength-12,!0)},l=884+32*u.nodeCount,h=884+32*u.nodeCount+40*u.linkCount,c=884+32*u.nodeCount+44*u.linkCount,y=884+36*u.nodeCount+52*u.linkCount+8*u.resAndTankCount+28*u.pumpCount+4,d=Ct(884,u.nodeCount,p),_=(e=u.nodeCount,n=[],i=function(t,e,r){var o=[],n=[],i=t+4*e;return Vt(e,(function(e){var s=r.getInt32(t+4*e,!0);o.push(s-1),n.push(r.getFloat32(i+4*e,!0))})),[o,n]}(c,u.resAndTankCount,p),s=i[0],a=i[1],Vt(e,(function(t){s.includes(t)?0!==a[s.indexOf(t)]?n.push(X.Tank):n.push(X.Reservoir):n.push(X.Junction)})),n),g=Ct(l,u.linkCount,p),E=function(t,e,r){var o=[];return Vt(e,(function(e){var n=r.getInt32(t+4*e,!0);o.push(n)})),o}(h,u.linkCount,p),m=o(Array(u.nodeCount)).map((function(t,e){return function(t,e,o,n,i,s){return["demand","head","pressure","waterQuality"].reduce((function(i,s,a){var p;return r(r({},i),((p={})[s]=Pt(t,e,!0,o,a).map((function(t){return n.getFloat32(t,!0)})),p))}),{id:i,type:s,demand:[],head:[],pressure:[],waterQuality:[]})}(u,y,e,p,d[e],_[e])})),f=o(Array(u.linkCount)).map((function(t,e){return function(t,e,o,n,i,s){return["flow","velocity","headloss","avgWaterQuality","status","setting","reactionRate","friction"].reduce((function(i,s,a){var p;return r(r({},i),((p={})[s]=Pt(t,e,!1,o,a).map((function(t){return n.getFloat32(t,!0)})),p))}),{id:i,type:s,flow:[],velocity:[],headloss:[],avgWaterQuality:[],status:[],setting:[],reactionRate:[],friction:[]})}(u,y,e,p,g[e],E[e])}));return{prolog:u,results:{nodes:m,links:f}}};
//# sourceMappingURL=epanet-js.cjs.production.min.js.map
